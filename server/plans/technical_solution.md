# –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ: –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π –ú–µ—Å—Å–µ–Ω–¥–∂–µ—Ä

## 1. –í–≤–µ–¥–µ–Ω–∏–µ
–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –ø—Ä–æ–µ–∫—Ç–∞ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ (–∏–ª–∏ —Å–µ—Ä–≤–∏—Å–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã), —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å, –≥–∏–±–∫–æ—Å—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –∏–∑–æ–ª—è—Ü–∏—é –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤.

–û—Å–Ω–æ–≤–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã ‚Äî –¥–∏–∞–≥—Ä–∞–º–º–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (`component.puml`).

## 2. –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

### Backend
*   **–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è**: **Go (Golang)**.
    *   *–ü—Ä–∏—á–∏–Ω–∞ –≤—ã–±–æ—Ä–∞*: –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –æ—Ç–ª–∏—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏ (goroutines) ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –≤ —á–∞—Ç–∞—Ö (WebSocket). –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –∏ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ–º–æ—Å—Ç—å –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –∫–æ–¥–∞.
*   **–§—Ä–µ–π–º–≤–æ—Ä–∫–∏/–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏**:
    *   `net/http` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞) –∏–ª–∏ `Gin`/`Echo` –¥–ª—è REST API.
    *   `gorilla/websocket` –∏–ª–∏ `nhooyr.io/websocket` –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —á–∞—Ç–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
    *   `pgx` –∏–ª–∏ `GORM` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
*   **–°–£–ë–î**: **PostgreSQL**.
    *   *–ü—Ä–∏—á–∏–Ω–∞ –≤—ã–±–æ—Ä–∞*: –ù–∞–¥–µ–∂–Ω–∞—è —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è —Å–ª–æ–∂–Ω–æ–π —Å—Ö–µ–º–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞ (—Å–≤—è–∑–∏ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –∑–∞–¥–∞—á–∞–º–∏, —á–∞—Ç–∞–º–∏ –∏ —Ä–∞–±–æ—á–∏–º–∏ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞–º–∏). –ü–æ–¥–¥–µ—Ä–∂–∫–∞ ACID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π.

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –î–µ–ø–ª–æ–π
*   **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**: **Docker**.
    *   –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —É–ø–∞–∫–æ–≤—ã–≤–∞—é—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã.
*   **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è**: **Docker Compose**.
    *   *–ü—Ä–∏—á–∏–Ω–∞ –≤—ã–±–æ—Ä–∞*: –£–¥–æ–±—Å—Ç–≤–æ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è. –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø–∏—Å–∞—Ç—å –≤—Å—é –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É (—Å–µ—Ä–≤–∏—Å—ã, –ë–î, —Å–µ—Ç–∏, —Ç–æ–º–∞) –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ `docker-compose.yml`.

### –ü—Ä–æ—Ç–æ–∫–æ–ª—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
*   **REST (HTTP/JSON)**: –î–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è (CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –∑–∞–¥–∞—á–∞–º–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏).
*   **WebSocket**: –î–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ (—á–∞—Ç).

## 3. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

–°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –∫–ª—é—á–µ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (—Å–æ–≥–ª–∞—Å–Ω–æ –¥–∏–∞–≥—Ä–∞–º–º–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤):

### 3.1. API Gateway
*   **–†–æ–ª—å**: –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ (Web, Desktop).
*   **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**: Kong Gateway (API Gateway –Ω–∞ –±–∞–∑–µ Nginx —Å Lua).
*   **–§—É–Ω–∫—Ü–∏–∏**:
    *   –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º.
    *   JWT –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è.
    *   Rate limiting –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç DDoS.
    *   CORS –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è –≤–µ–±-–∫–ª–∏–µ–Ω—Ç–æ–≤.
    *   –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus).
    *   Request/response —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è.

### 3.2. –°–µ—Ä–≤–∏—Å—ã –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ (Backend Services)

–ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω–æ–µ Go-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

1.  **–°–µ—Ä–≤–∏—Å –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (Auth Service)**
    *   –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –≤—Ö–æ–¥, –≤—ã–¥–∞—á–∞ JWT —Ç–æ–∫–µ–Ω–æ–≤ (Access/Refresh).
    *   –•—Ä–∞–Ω–µ–Ω–∏–µ —Ö–µ—à–µ–π –ø–∞—Ä–æ–ª–µ–π.

2.  **–°–µ—Ä–≤–∏—Å –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (User Service)**
    *   –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è–º–∏, —Å—Ç–∞—Ç—É—Å–∞–º–∏.
    *   –ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

3.  **–°–µ—Ä–≤–∏—Å –†–∞–±–æ—á–∏—Ö –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤ (Workspace Service)**
    *   CRUD —Ä–∞–±–æ—á–∏—Ö –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤.
    *   –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Ä–∞–º–∫–∞—Ö –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞.
    *   –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞.

4.  **–°–µ—Ä–≤–∏—Å –ß–∞—Ç–æ–≤ –∏ –°–æ–æ–±—â–µ–Ω–∏–π (Chat & Message Service)**
    *   **–ö–ª—é—á–µ–≤–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç**.
    *   –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞—Ç–∞–º–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ, —É—á–∞—Å—Ç–Ω–∏–∫–∏).
    *   –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ WebSocket.
    *   –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –ë–î.

5.  **–°–µ—Ä–≤–∏—Å –ó–∞–¥–∞—á (Task Service)**
    *   CRUD –∑–∞–¥–∞—á (—Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —Å—Ç–∞—Ç—É—Å).
    *   –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π.
    *   –°–≤—è–∑—å –∑–∞–¥–∞—á —Å —á–∞—Ç–∞–º–∏.

6.  **–°–µ—Ä–≤–∏—Å –ñ–∞–ª–æ–± (Complaint Service)**
    *   –ü—Ä–∏–µ–º –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∂–∞–ª–æ–± –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

### 3.3. –°–ª–æ–π –¥–∞–Ω–Ω—ã—Ö (Data Access Layer)
*   –°–µ—Ä–≤–∏—Å—ã –æ–±—Ä–∞—â–∞—é—Ç—Å—è –∫ –µ–¥–∏–Ω–æ–π (–∏–ª–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω–æ–π –ø–æ —Å—Ö–µ–º–∞–º) –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö PostgreSQL.
*   –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `golang-migrate`) –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ö–µ–º–æ–π –ë–î.

## 4. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Docker Compose

Kong Gateway –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –Ω–∞ –ø–æ—Ä—Ç 8080. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `docker-compose.yml`:

```yaml
version: '3.8'
services:
  # Kong Database –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Kong
  kong-database:
    image: postgres:13
    environment:
      POSTGRES_DB: kong
      POSTGRES_USER: kong
      POSTGRES_PASSWORD: kong

  # Kong Gateway - –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
  kong:
    image: kong:3.4
    environment:
      KONG_DATABASE: postgres
      KONG_PG_HOST: kong-database
      KONG_ADMIN_LISTEN: 0.0.0.0:8001
      KONG_ADMIN_GUI_LISTEN: 0.0.0.0:8002
      KONG_PROXY_LISTEN: 0.0.0.0:8000
      KONG_PLUGINS: bundled,jwt,request-transformer,cors,prometheus
    ports:
      - "8080:8000"    # Kong Proxy (–µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞)
      - "8001:8001"    # Kong Admin API
      - "8002:8002"    # Kong Manager GUI
    volumes:
      - ./kong.yml:/kong/declarative/kong.yml:ro
    depends_on:
      kong-database:
        condition: service_healthy

  # PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  postgres:
    image: postgres:15-alpine
    environment:
      POSTGRES_USER: user
      POSTGRES_PASSWORD: password
      POSTGRES_DB: messenger_db
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data

  # –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã (–ø—Ä–∏–º–µ—Ä—ã)
  auth-service:
    build: ./services/auth
    ports:
      - "8081:8081"
    environment:
      PORT: 8081
      DB_HOST: postgres
      JWT_SECRET: your_jwt_secret_key
    depends_on:
      postgres:
        condition: service_healthy
      kong:
        condition: service_started

  # Swagger UI –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API
  swagger-ui:
    image: swaggerapi/swagger-ui:v5.10.3
    environment:
      SWAGGER_JSON_URL: /swagger.json
      URLS: [{"name": "Auth Service", "url": "/auth/swagger.json"}, ...]
    ports:
      - "8089:8080"

volumes:
  postgres_data:
  kong_data:
```

## 4. –î–∏–∞–≥—Ä–∞–º–º—ã –ø—Ä–æ–µ–∫—Ç–∞

### 4.1. –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö ([`server/diagrs/Laba5.ddl`](server/diagrs/Laba5.ddl))
**SQL DDL —Å—Ö–µ–º–∞ PostgreSQL** —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏:

**–û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏**:
- `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã (id, login, password, status, surname, name, patronymic)
- `messages` - —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç–∞—Ö (id, chatsid, usersid, text, date, status)
- `chats` - —á–∞—Ç—ã (id, name, type, workspacesid)
- `workspaces` - —Ä–∞–±–æ—á–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ (id, creator, tariffsid, name)
- `tasks` - –∑–∞–¥–∞—á–∏ (id, creator, workspacesid, title, description, date, status)
- `administrators` - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã (id, login, password)
- `complaints` - –∂–∞–ª–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (id, text, date, deviceDescription, author)
- `tariffs` - —Ç–∞—Ä–∏—Ñ–Ω—ã–µ –ø–ª–∞–Ω—ã (id, name, description)

**–°–≤—è–∑—É—é—â–∏–µ —Ç–∞–±–ª–∏—Ü—ã**:
- `userInWorkspace` - —Å–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –†–ü (usersid, workspacesid, role, date)
- `userInChat` - —É—á–∞—Å—Ç–Ω–∏–∫–∏ —á–∞—Ç–∞ (id, role, date, chatsid, usersid)
- `taskInChat` - –ø—Ä–∏–≤—è–∑–∫–∞ –∑–∞–¥–∞—á –∫ —á–∞—Ç–∞–º (id, chatsid, tasksid)
- `taskChanges` - –∏—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∑–∞–¥–∞—á (id, description, tasksid)
- `userInTask` - –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ –∑–∞–¥–∞—á–∏ (id, tasksid, usersid)

**–ö–ª—é—á–µ–≤—ã–µ —Å–≤—è–∑–∏**:
- Workspace —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º, –∏–º–µ–µ—Ç —Ç–∞—Ä–∏—Ñ
- –ß–∞—Ç—ã –∏ –∑–∞–¥–∞—á–∏ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ —Ä–∞–±–æ—á–∏–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞–º
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –†–ü —Å —Ä–∞–∑–Ω—ã–º–∏ —Ä–æ–ª—è–º–∏
- –ó–∞–¥–∞—á–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω—ã –∫ —á–∞—Ç–∞–º

### 4.2. –î–∏–∞–≥—Ä–∞–º–º—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –∫–ª–∞—Å—Å–æ–≤

**–î–∏–∞–≥—Ä–∞–º–º–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã**: [`server/diagrs/component`](server/diagrs/component) - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤, –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ –∏ –ø–æ—Ç–æ–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö.

**–î–∏–∞–≥—Ä–∞–º–º—ã —Ç–∏–ø–æ–≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤**:
- **Auth Service**: [`server/diagrs/auth_service_class_diagram`](server/diagrs/auth_service_class_diagram) - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∏–ø–æ–≤ Go —Å–µ—Ä–≤–∏—Å–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å –º–æ–¥–µ–ª—è–º–∏ –¥–∞–Ω–Ω—ã—Ö, –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º –∏ —É—Ç–∏–ª–∏—Ç–∞–º–∏

### 4.3. Use Case –¥–∏–∞–≥—Ä–∞–º–º—ã

**–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**: [`server/diagrs/usecase_admin`](server/diagrs/usecase_admin) - –¥–∏–∞–≥—Ä–∞–º–º–∞ —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤ —Å–∏—Å—Ç–µ–º—ã.

**–ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä**: [`server/diagrs/usecase_messendger`](server/diagrs/usecase_messendger) - –¥–∏–∞–≥—Ä–∞–º–º–∞ —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞.

## 6. REST API –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö REST API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –ø–∞–ø–∫–µ:

**üìÅ [API Documentation](./api/README.md)**

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ä–∞–∑–±–∏—Ç–∞ –ø–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º:
- [API Gateway](./api/gateway.md) - –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- [Auth Service](./api/auth_service.md) - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ JWT
- [User Service](./api/user_service.md) - –ø—Ä–æ—Ñ–∏–ª–∏ –∏ —Å—Ç–∞—Ç—É—Å—ã
- [Workspace Service](./api/workspace_service.md) - —Ä–∞–±–æ—á–∏–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
- [Chat Service](./api/chat_service.md) - —á–∞—Ç—ã –∏ WebSocket
- [Task Service](./api/task_service.md) - –∑–∞–¥–∞—á–∏ –∏ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏
- [Complaint Service](./api/complaint_service.md) - –∂–∞–ª–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:

| –°–µ—Ä–≤–∏—Å | –ü–æ—Ä—Ç | –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã | –ö–æ–ª-–≤–æ | –°—Ç–∞—Ç—É—Å |
|--------|------|-------------------|--------|--------|
| **Kong Gateway** | 8080 | –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è, JWT –≤–∞–ª–∏–¥–∞—Ü–∏—è, health check | 1 | ‚úÖ |
| **Auth Service** | 8081 | `/auth/register`, `/auth/login`, `/auth/refresh` | 7 | ‚úÖ |
| **User Service** | 8082 | `/users/me`, `/users/:id`, `/users/search`, `/users/workspace/:id` | 7 | ‚úÖ |
| **Workspace Service** | 8083 | `/workspaces`, `/workspaces/:id/members`, `/tariffs` | 12 | ‚úÖ |
| **Chat Service** | 8084 | `/chats`, `/chats/:id/messages`, WebSocket | 15 | ‚úÖ |
| **Task Service** | 8085 | `/tasks`, `/tasks/:id/assignees`, `/tasks/:id/status` | 13 | ‚úÖ |
| **Complaint Service** | 8086 | `/complaints`, `/complaints/:id/status` | 5 | ‚úÖ |

**–ò—Ç–æ–≥–æ: 58 REST —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ + 1 WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ**

**–°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**: 58/58 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ (100%)
- ‚úÖ Auth Service: 7/7 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- ‚úÖ User Service: 7/7 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- ‚úÖ Workspace Service: 12/12 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- ‚úÖ Chat Service: 15/15 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ + WebSocket
- ‚úÖ Task Service: 13/13 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- ‚úÖ Complaint Service: 5/5 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

## 7. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏

### 6.1. –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

–î–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –∏ –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–∞ –±–∞–∑–µ **Prometheus** –∏ **Grafana**:

- **Prometheus**: –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –æ—Ç –≤—Å–µ—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤
- **Grafana**: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–æ–≤
- **–ú–µ—Ç—Ä–∏–∫–∏ —ç–∫—Å–ø–æ–∑–∏—Ü–∏–∏**: –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç `/metrics` —ç–Ω–¥–ø–æ–∏–Ω—Ç —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ Prometheus

### 6.2. –°–æ–±–∏—Ä–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏

#### HTTP –ú–µ—Ç—Ä–∏–∫–∏ (–¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤)
- `http_request_duration_seconds` - –ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- `http_requests_total` - –°—á–µ—Ç—á–∏–∫ –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤
- `http_response_size_bytes` - –ì–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ —Ä–∞–∑–º–µ—Ä–∞ HTTP –æ—Ç–≤–µ—Ç–æ–≤

–í—Å–µ HTTP –º–µ—Ç—Ä–∏–∫–∏ –∏–º–µ—é—Ç –ª–µ–π–±–ª—ã:
- `method` - HTTP –º–µ—Ç–æ–¥ (GET, POST, PUT, DELETE)
- `endpoint` - –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø—É—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ (—Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –ø–æ ID)
- `status` - HTTP —Å—Ç–∞—Ç—É—Å –∫–æ–¥

#### –°–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- `go_goroutines_total` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –≥–æ—Ä—É—Ç–∏–Ω
- `go_gc_duration_seconds` - –í—Ä–µ–º—è, –ø–æ—Ç—Ä–∞—á–µ–Ω–Ω–æ–µ –Ω–∞ —Å–±–æ—Ä–∫—É –º—É—Å–æ—Ä–∞
- `go_memory_used_bytes` - –¢–µ–∫—É—â–µ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏

#### –ú–µ—Ç—Ä–∏–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è
- `up` - –°—Ç–∞—Ç—É—Å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞ (1 = –¥–æ—Å—Ç—É–ø–µ–Ω, 0 = –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)

### 6.3. –î–∞—à–±–æ—Ä–¥—ã Grafana

#### Microservices Overview Dashboard
–û–±—â–∏–π –¥–∞—à–±–æ—Ä–¥ —Å –∫–ª—é—á–µ–≤—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏ –ø–æ –≤—Å–µ–º —Å–µ—Ä–≤–∏—Å–∞–º:
- **Service Health Status**: –°—Ç–∞—Ç—É—Å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- **HTTP Request Rate**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É –ø–æ —Å–µ—Ä–≤–∏—Å–∞–º
- **HTTP Response Time (95th percentile)**: 95-–π –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª—å –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞
- **HTTP Error Rate**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ 4xx/5xx –ø–æ —Å–µ—Ä–≤–∏—Å–∞–º
- **Memory Usage**: –ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –∫–∞–∂–¥—ã–º —Å–µ—Ä–≤–∏—Å–æ–º
- **CPU Usage (Goroutines)**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –≥–æ—Ä—É—Ç–∏–Ω
- **HTTP Response Size**: –†–∞–∑–º–µ—Ä –æ—Ç–≤–µ—Ç–æ–≤ —Å–µ—Ä–≤–∏—Å–æ–≤

### 6.4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

#### Prometheus
- **Scrape interval**: 15 —Å–µ–∫—É–Ω–¥
- **Retention**: 200 —á–∞—Å–æ–≤
- **Targets**: –í—Å–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –Ω–∞ –∏—Ö –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –ø–æ—Ä—Ç–∞—Ö

#### Grafana
- **URL**: http://localhost:3000
- **Admin credentials**: admin/admin123
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ provisioning**: Datasources –∏ dashboards –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### 6.5. –î–æ—Å—Ç—É–ø –∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É

- **Prometheus**: http://localhost:9090
- **Grafana**: http://localhost:3000
- **Metrics —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã**: –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç `/metrics` –Ω–∞ —Å–≤–æ–µ–º –ø–æ—Ä—Ç—É

## 8. –ü–ª–∞–Ω —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (Roadmap)

1.  **–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î**: –°–æ–∑–¥–∞–Ω–∏–µ SQL-—Å—Ö–µ–º—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ ER-–¥–∏–∞–≥—Ä–∞–º–º—ã.
2.  **–ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Kong Gateway + Docker Compose.
3.  **Auth Service**: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –ª–æ–≥–∏–Ω–∞ –∏ JWT —Ç–æ–∫–µ–Ω–æ–≤.
4.  **Kong Gateway**: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏, JWT –≤–∞–ª–∏–¥–∞—Ü–∏–∏, CORS, rate limiting.
5.  **User & Workspace Services**: –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ä–∞–±–æ—á–∏—Ö –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤.
6.  **Chat Service**: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è REST API –∏ WebSocket –¥–ª—è real-time –æ–±—â–µ–Ω–∏—è.
7.  **Task Service**: ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏, –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º–∏ –∏ –∏—Å—Ç–æ—Ä–∏–µ–π –∏–∑–º–µ–Ω–µ–Ω–∏–π.
8.  **Complaint Service**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∂–∞–ª–æ–± –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
9.  **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –°–±–æ—Ä–∫–∞ –≤—Å–µ–≥–æ –≤ –µ–¥–∏–Ω—ã–π –∫–æ–Ω—Ç—É—Ä —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º.
10. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: Unit, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –∏ E2E —Ç–µ—Å—Ç—ã.
11. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.
